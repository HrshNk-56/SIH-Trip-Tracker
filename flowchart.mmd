graph TD
    %% User Entry Points
    A[User Access] --> B{Authentication Check}
    B -->|Not Authenticated| C[Redirect to Login]
    B -->|Authenticated| D[Dashboard Access]
    
    %% Main Dashboard Flow
    D --> E[Trip Planning Interface]
    E --> F[Choose Transport Mode]
    F --> G[Day Itinerary Planning]
    
    %% AI Models Integration
    G --> H[AI Models Processing]
    H --> I[Travel AI Model]
    H --> J[ChatBot Model]
    H --> K[Image Processing Model]
    
    %% Travel AI Model Flow
    I --> L[GPS Trajectory Processing]
    L --> M[Read .plt Files]
    M --> N[Haversine Distance Calculation]
    N --> O[Speed & Movement Analysis]
    O --> P[Trip Classification]
    P --> Q{Trip Type}
    Q -->|Business| R[Business Trip Features]
    Q -->|Leisure| S[Leisure Trip Features]
    
    %% ChatBot Model Flow
    J --> T[Phi-3 Mini Model Loading]
    T --> U[Session Management]
    U --> V[Context History Maintenance]
    V --> W[Natural Language Processing]
    W --> X[Travel Recommendations]
    
    %% Image Processing Model Flow
    K --> Y[OCR Processing with EasyOCR]
    Y --> Z[Bill/Receipt Analysis]
    Z --> AA[Amount Extraction]
    AA --> BB[Expense Calculation]
    BB --> CC[Budget Tracking]
    CC --> DD{Budget Status}
    DD -->|Within Budget| EE[✅ Safe Status]
    DD -->|Close to Limit| FF[⚠️ Warning Status]
    DD -->|Over Budget| GG[❌ Exceeded Status]
    
    %% Backend API Layer
    R --> HH[Go Backend API]
    S --> HH
    X --> HH
    EE --> HH
    FF --> HH
    GG --> HH
    
    %% Database Operations
    HH --> II[Database Operations]
    II --> JJ[User Management]
    II --> KK[Trip Header Storage]
    II --> LL[Expense Tracking]
    
    %% Frontend Integration
    HH --> MM[React Frontend]
    MM --> NN[Trip State Management]
    NN --> OO[Real-time Updates]
    
    %% Data Flow Between Components
    OO --> PP[Notifications System]
    PP --> QQ[User Dashboard Updates]
    
    %% External Integrations
    HH --> RR[Vision Controller]
    RR --> SS[External AI Bot API]
    SS --> TT[Image Analysis Results]
    
    %% Output & Results
    QQ --> UU[Trip Overview]
    UU --> VV[Budget Summary]
    UU --> WW[Travel Recommendations]
    UU --> XX[Itinerary Details]
    
    %% Data Storage & Export
    LL --> YY[CSV Export]
    LL --> ZZ[JSON Export]
    YY --> AAA[Data Analytics]
    ZZ --> AAA
    
    %% Model Training & Updates
    AAA --> BBB[Model Refinement]
    BBB --> CCC[Classification Accuracy]
    CCC --> I
    
    %% Styling
    classDef userInterface fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef aiModel fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef backend fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef database fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef decision fill:#ffebee,stroke:#c62828,stroke-width:2px
    
    class A,C,D,E,F,G,MM,NN,OO,PP,QQ,UU,VV,WW,XX userInterface
    class I,J,K,L,M,N,O,P,T,U,V,W,X,Y,Z,AA,BB,CC,BBB,CCC aiModel
    class HH,RR,SS,TT backend
    class II,JJ,KK,LL,YY,ZZ,AAA database
    class B,Q,DD decision